{% from "../partials/image.njk" import image %}
{% from "../partials/text.njk" import text %}
{% from "../partials/cta.njk" import cta %}

{% macro logosList(info, data) %}
  {# we need two copies so the auto scroll works properly #}
  {% set copies = 2 %}

  {# is scope is set to all we will show all logos that are available in data[info.listSource] #}
  {% if info.scope === "all" %}
    {% set logosList = data[info.listSource] %}
  {% endif %}
  {# filter the whole list which is available in data[info.listSource] with the list item ids which is available in info.selections. #}
  {% if info.scope === "selections" %}
    {% set logosList = data[info.listSource] | filterList(info.selections) %}
  {% endif %}

  {% set logoWidth = info.logoWidth %}
  {% set logosListLength = logosList | length  *  logoWidth ~ "px" %}

  {{ text(info) }}

  <div class="marquee" style="--list-width: {{ logosListLength }}">
    <div class="logos-wrapper">

      {% for i in range(0, copies) -%}
      <ul class="logos js-logos-list">
      {% for item in logosList %}
        <li>
          <a href="{{ item.web }}" title="{{ item.name }}">
            {{ image(item.logo, data) }}
          </a>
        </li>
      {% endfor %}
      </ul>
      {% endfor %}
    </div> <!-- marquee-inner -->
  </div> <!-- marquee -->

  {{ cta(info.cta) }}
  
{% endmacro %}